---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)

```

[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental) 

## Padrino  <a href='https://levisc8.github.io/Padrino'><img src='metadata/pdb_logo.png' align="right" height="139" /></a>


This repo hosts the code used to generate and upload data to the `Padrino` data base. This is more for back end management and to help Padri√±os to find their way as they get started. I've created a separate repo called `RPadrino` that will be eventually become the equivalent of `Rcompadre`. That is where prospective users should go to find an interface to this database that is actually useful. 

Currently, the data base is a set of 12 CSV files that consist of ASCII representation of model formulae, the coefficients associated with said models, and the upper/lower bounds of the state variables. We are closing in on a finalized design, at which point it seems likely that this will transition to an SQL instance hosted remotely. Eventually, it would be nice to be able to generate `.rda` objects (a la Compadre) and/or query it directly from R through an API. 

## Useful Numbers

Current number of unique species, unique publications, and unique `ipm_id`s that are in PADRINO, and have been quality checked for accuracy. Quality checked means that for deterministic models, the asymptotic per-capita growth rate ($\lambda$) is within $\pm 0.03$ of the published point estimate value. For stochastic models, we check for approximately the same stochastic population growth rate ($\lambda_s$), but do not try to replicate the analysis, as this usually requires too many computing resources to be feasible.  

```{r echo = FALSE, message = FALSE}

library(RPadrino)

pdb <- pdb_download(save = FALSE)

full_tab <-  data.frame(
  Number_of_Species      = length(unique(pdb$Metadata$species_accepted)), 
  Number_of_Publications = length(unique(pdb$Metadata$apa_citation)),
  Number_of_IPM_ids      = nrow(pdb$Metadata)
)

names(full_tab) <- gsub("_", " ", names(full_tab))


knitr::kable(
  full_tab,
  col.names = c("# of Species", "# of Publications", "# of IPM id's")
)

```

## For developers


For now, all commits will go to the `main` branch as this is still so early in development that keeping a separate `devel` branch is pointless. This will change immediately before/after the first major release.

Development of the package `RPadrino` is taking place over [here](https://github.com/levisc8/RPadrino).

## For Compadrinos

The digitization guide and other help files are located in `metadata/digitization` and on the project's [webpage](https://levisc8.github.io/Padrino/). The [pdbDigitUtils](https://github.com/levisc8/pdbDigitUtils) package can help detect some problems with freshly digitized models. The digitization guide has more information on how that package works.
